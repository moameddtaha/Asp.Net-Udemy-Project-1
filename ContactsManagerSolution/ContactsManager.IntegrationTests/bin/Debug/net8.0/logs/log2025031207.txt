2025-03-12 07:41:28.850 +02:00 [INF] User profile is available. Using 'C:\Users\negan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-12 07:41:29.459 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Create - null null
2025-03-12 07:41:29.470 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Create
2025-03-12 07:41:29.482 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:41:29.498 +02:00 [INF] Route matched with {action = "Create", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:41:29.593 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.593 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.593 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.613 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.613 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.613 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.614 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:41:29.617 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI) in 116.9057ms
2025-03-12 07:41:29.620 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:41:29.621 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:41:29.623 +02:00 [ERR] HTTP GET /Persons/Create responded 500 in 154.9693 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:41:29.650 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:41:29.654 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:41:29.660 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:41:29.660 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:41:29.661 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:41:29.662 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.672 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:29.684 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:41:29.741 +02:00 [INF] Executed ViewResult - view Error executed in 62.7489ms.
2025-03-12 07:41:29.742 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 80.077ms
2025-03-12 07:41:29.742 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:41:29.742 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:41:29.742 +02:00 [ERR] HTTP GET /Error responded 500 in 82.1900 ms
2025-03-12 07:41:29.747 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Create - 500 null text/html; charset=utf-8 288.3214ms
2025-03-12 07:41:29.993 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Index - null null
2025-03-12 07:41:29.994 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
2025-03-12 07:41:29.996 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:41:30.008 +02:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:41:30.017 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.017 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.017 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.018 +02:00 [INF] PersonsListActionFilter.OnActionExecuting method
2025-03-12 07:41:30.019 +02:00 [INF] Index action method of PersonsController
2025-03-12 07:41:30.024 +02:00 [INF] GetFilteredPersons of PersonsService
2025-03-12 07:41:30.025 +02:00 [INF] GetAllPersons of PersonsRepository
2025-03-12 07:41:30.026 +02:00 [INF] Time for Filtered Persons from Database completed in 2.0 ms
2025-03-12 07:41:30.028 +02:00 [INF] PersonsListActionFilter.OnActionExecuted method
2025-03-12 07:41:30.030 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.030 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.030 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.030 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:41:30.031 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI) in 22.8134ms
2025-03-12 07:41:30.031 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:41:30.031 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:41:30.031 +02:00 [ERR] HTTP GET /Persons/Index responded 500 in 37.4217 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:41:30.037 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:41:30.037 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:41:30.040 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:41:30.041 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:41:30.052 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:41:30.052 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.052 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:41:30.052 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:41:30.055 +02:00 [INF] Executed ViewResult - view Error executed in 2.5448ms.
2025-03-12 07:41:30.055 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 3.1529ms
2025-03-12 07:41:30.055 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:41:30.055 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:41:30.055 +02:00 [ERR] HTTP GET /Error responded 500 in 14.8151 ms
2025-03-12 07:41:30.055 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Index - 500 null text/html; charset=utf-8 62.5257ms
2025-03-12 07:49:35.037 +02:00 [INF] User profile is available. Using 'C:\Users\negan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-12 07:49:38.637 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Index - null null
2025-03-12 07:49:38.653 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
2025-03-12 07:49:38.668 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:49:38.697 +02:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:49:38.838 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:49:38.838 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:49:38.839 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:49:38.840 +02:00 [INF] PersonsListActionFilter.OnActionExecuting method
2025-03-12 07:49:38.842 +02:00 [INF] Index action method of PersonsController
2025-03-12 07:49:38.846 +02:00 [INF] GetFilteredPersons of PersonsService
2025-03-12 07:49:38.848 +02:00 [INF] GetAllPersons of PersonsRepository
2025-03-12 07:49:38.919 +02:00 [INF] Time for Filtered Persons from Database completed in 70.9 ms
2025-03-12 07:49:38.961 +02:00 [INF] PersonsListActionFilter.OnActionExecuted method
2025-03-12 07:49:38.985 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:49:38.986 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:49:38.986 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:49:38.988 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:49:38.993 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI) in 292.1075ms
2025-03-12 07:49:38.996 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:49:38.998 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:49:39.000 +02:00 [ERR] HTTP GET /Persons/Index responded 500 in 350.6746 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:49:39.045 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:49:39.067 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:49:39.080 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:49:39.080 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:49:39.081 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:49:39.082 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:49:39.086 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:49:39.106 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:49:39.173 +02:00 [INF] Executed ViewResult - view Error executed in 77.4035ms.
2025-03-12 07:49:39.174 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 92.1564ms
2025-03-12 07:49:39.174 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:49:39.174 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:49:39.174 +02:00 [ERR] HTTP GET /Error responded 500 in 95.3011 ms
2025-03-12 07:49:39.205 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Index - 500 null text/html; charset=utf-8 552.0404ms
2025-03-12 07:58:15.264 +02:00 [INF] User profile is available. Using 'C:\Users\negan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-12 07:58:15.369 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Create - null null
2025-03-12 07:58:15.379 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Create
2025-03-12 07:58:15.392 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:58:15.408 +02:00 [INF] Route matched with {action = "Create", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:58:15.491 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.491 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.491 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.514 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.514 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.514 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.516 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:58:15.519 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI) in 107.7181ms
2025-03-12 07:58:15.522 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:58:15.524 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:58:15.526 +02:00 [ERR] HTTP GET /Persons/Create responded 500 in 148.1953 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:58:15.533 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:58:15.536 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:58:15.542 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:58:15.543 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:58:15.544 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:58:15.545 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.559 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.573 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:58:15.640 +02:00 [INF] Executed ViewResult - view Error executed in 73.8739ms.
2025-03-12 07:58:15.641 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 96.0023ms
2025-03-12 07:58:15.641 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:58:15.641 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:58:15.641 +02:00 [ERR] HTTP GET /Error responded 500 in 99.0023 ms
2025-03-12 07:58:15.647 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Create - 500 null text/html; charset=utf-8 279.422ms
2025-03-12 07:58:15.692 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Index - null null
2025-03-12 07:58:15.692 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
2025-03-12 07:58:15.693 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:58:15.702 +02:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:58:15.712 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.712 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.712 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.713 +02:00 [INF] PersonsListActionFilter.OnActionExecuting method
2025-03-12 07:58:15.714 +02:00 [INF] Index action method of PersonsController
2025-03-12 07:58:15.719 +02:00 [INF] GetFilteredPersons of PersonsService
2025-03-12 07:58:15.720 +02:00 [INF] GetAllPersons of PersonsRepository
2025-03-12 07:58:15.722 +02:00 [INF] Time for Filtered Persons from Database completed in 1.9 ms
2025-03-12 07:58:15.724 +02:00 [INF] PersonsListActionFilter.OnActionExecuted method
2025-03-12 07:58:15.726 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.726 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.726 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.726 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:58:15.726 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI) in 23.9164ms
2025-03-12 07:58:15.726 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:58:15.727 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:58:15.727 +02:00 [ERR] HTTP GET /Persons/Index responded 500 in 34.6758 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:58:15.729 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:58:15.729 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:58:15.732 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:58:15.732 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:58:15.744 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:58:15.744 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.744 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:58:15.744 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:58:15.747 +02:00 [INF] Executed ViewResult - view Error executed in 2.8301ms.
2025-03-12 07:58:15.747 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 3.397ms
2025-03-12 07:58:15.747 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:58:15.747 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:58:15.747 +02:00 [ERR] HTTP GET /Error responded 500 in 15.7720 ms
2025-03-12 07:58:15.748 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Index - 500 null text/html; charset=utf-8 56.1101ms
2025-03-12 07:59:41.011 +02:00 [INF] User profile is available. Using 'C:\Users\negan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-12 07:59:41.106 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Create - null null
2025-03-12 07:59:41.117 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Create
2025-03-12 07:59:41.129 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:59:41.146 +02:00 [INF] Route matched with {action = "Create", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:59:41.230 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.231 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.231 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.259 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.259 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.259 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.260 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:41.265 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI) in 114.9507ms
2025-03-12 07:59:41.267 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:59:41.269 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:59:41.271 +02:00 [ERR] HTTP GET /Persons/Create responded 500 in 155.0599 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:59:41.288 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:41.294 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:59:41.300 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:59:41.301 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:41.302 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:59:41.302 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.316 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.330 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:59:41.391 +02:00 [INF] Executed ViewResult - view Error executed in 67.5005ms.
2025-03-12 07:59:41.391 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 88.8336ms
2025-03-12 07:59:41.391 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:41.391 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:59:41.391 +02:00 [ERR] HTTP GET /Error responded 500 in 91.4725 ms
2025-03-12 07:59:41.397 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Create - 500 null text/html; charset=utf-8 291.7218ms
2025-03-12 07:59:41.442 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Index - null null
2025-03-12 07:59:41.443 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
2025-03-12 07:59:41.444 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:59:41.454 +02:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:59:41.464 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.464 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.465 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.465 +02:00 [INF] PersonsListActionFilter.OnActionExecuting method
2025-03-12 07:59:41.466 +02:00 [INF] Index action method of PersonsController
2025-03-12 07:59:41.471 +02:00 [INF] GetFilteredPersons of PersonsService
2025-03-12 07:59:41.472 +02:00 [INF] GetAllPersons of PersonsRepository
2025-03-12 07:59:41.474 +02:00 [INF] Time for Filtered Persons from Database completed in 2.0 ms
2025-03-12 07:59:41.476 +02:00 [INF] PersonsListActionFilter.OnActionExecuted method
2025-03-12 07:59:41.477 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.477 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.477 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.478 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:41.478 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI) in 23.6101ms
2025-03-12 07:59:41.478 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:59:41.478 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:59:41.478 +02:00 [ERR] HTTP GET /Persons/Index responded 500 in 35.9264 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:59:41.480 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:41.481 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:59:41.483 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:59:41.483 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:41.484 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:59:41.495 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.495 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:41.495 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:59:41.497 +02:00 [INF] Executed ViewResult - view Error executed in 2.4688ms.
2025-03-12 07:59:41.498 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 13.9524ms
2025-03-12 07:59:41.498 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:41.498 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:59:41.498 +02:00 [ERR] HTTP GET /Error responded 500 in 14.5145 ms
2025-03-12 07:59:41.498 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Index - 500 null text/html; charset=utf-8 55.9478ms
2025-03-12 07:59:53.481 +02:00 [INF] User profile is available. Using 'C:\Users\negan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-12 07:59:53.581 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Create - null null
2025-03-12 07:59:53.591 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Create
2025-03-12 07:59:53.602 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:59:53.617 +02:00 [INF] Route matched with {action = "Create", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create() on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:59:53.693 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.693 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.693 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.715 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.715 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.716 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.717 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:53.722 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI) in 100.6717ms
2025-03-12 07:59:53.724 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Create (ContactsManager.UI)'
2025-03-12 07:59:53.725 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:59:53.728 +02:00 [ERR] HTTP GET /Persons/Create responded 500 in 137.7664 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:59:53.743 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:53.747 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Repos.CountriesRepo.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\CountriesRepo.cs:line 31
   at Services.CountriesGetterService.GetAllCountries() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\CountriesGetterService.cs:line 22
   at CRUDExample.Controllers.PersonsController.GetCountrySelectListAsync() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 217
   at CRUDExample.Controllers.PersonsController.Create() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:59:53.752 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:59:53.752 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:53.753 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:59:53.754 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.766 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.779 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:59:53.839 +02:00 [INF] Executed ViewResult - view Error executed in 66.1161ms.
2025-03-12 07:59:53.839 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 85.9094ms
2025-03-12 07:59:53.839 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:53.840 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:59:53.840 +02:00 [ERR] HTTP GET /Error responded 500 in 87.9910 ms
2025-03-12 07:59:53.845 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Create - 500 null text/html; charset=utf-8 265.5302ms
2025-03-12 07:59:53.887 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost/Persons/Index - null null
2025-03-12 07:59:53.888 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Persons/Index
2025-03-12 07:59:53.889 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:59:53.897 +02:00 [INF] Route matched with {action = "Index", controller = "Persons"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String, System.String, System.String, ServiceContracts.Enums.SortOrderOptions) on controller CRUDExample.Controllers.PersonsController (ContactsManager.UI).
2025-03-12 07:59:53.906 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.907 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.907 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.907 +02:00 [INF] PersonsListActionFilter.OnActionExecuting method
2025-03-12 07:59:53.908 +02:00 [INF] Index action method of PersonsController
2025-03-12 07:59:53.912 +02:00 [INF] GetFilteredPersons of PersonsService
2025-03-12 07:59:53.913 +02:00 [INF] GetAllPersons of PersonsRepository
2025-03-12 07:59:53.915 +02:00 [INF] Time for Filtered Persons from Database completed in 1.8 ms
2025-03-12 07:59:53.916 +02:00 [INF] PersonsListActionFilter.OnActionExecuted method
2025-03-12 07:59:53.918 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.918 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.918 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.918 +02:00 [ERR] Exception filter HandleExceptionFilter.OnException 
 System.InvalidOperationException 
 Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:53.918 +02:00 [INF] Executed action CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI) in 20.8281ms
2025-03-12 07:59:53.918 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.PersonsController.Index (ContactsManager.UI)'
2025-03-12 07:59:53.919 +02:00 [INF] Response:
StatusCode: 200
my-key-from-global: [Redacted]
my-key-from-action: [Redacted]
my-key-from-controller: [Redacted]
2025-03-12 07:59:53.919 +02:00 [ERR] HTTP GET /Persons/Index responded 500 in 30.7342 ms
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-03-12 07:59:53.920 +02:00 [ERR] System.InvalidOperationException Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
2025-03-12 07:59:53.921 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity](IQueryable`1 source, String navigationPropertyPath)
   at Repos.PersonsRepository.GetAllPersons() in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Infrastructure\Repositories\PersonsRepository.cs:line 51
   at Services.PersonsGetterService.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonsGetterService.cs:line 106
   at Services.PersonGetterServiceWIthFewExcelFields.GetFilteredPersons(String searchBy, String searchString) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.Core\Services\PersonGetterServiceWIthFewExcelFields.cs:line 23
   at CRUDExample.Controllers.PersonsController.Index(String searchBy, String searchString, String sortBy, SortOrderOptions sortOrder) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Controllers\PersonsController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ExceptionContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResourceFilter()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware.InvokeInternal(HttpContext context, HttpLoggingOptions options, HttpLoggingAttribute loggingAttribute, HttpLoggingFields loggingFields)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at CRUDExample.Middleware.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in C:\Users\negan\Desktop\crud-operations\ContactsManagerSolution\ContactsManager.UI\Middleware\ExceptionHandlingMiddleware.cs:line 26
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-03-12 07:59:53.923 +02:00 [INF] Request:
Protocol: HTTP/1.1
Method: GET
Scheme: http
PathBase: 
Path: /Error
2025-03-12 07:59:53.923 +02:00 [INF] Executing endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:53.933 +02:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller CRUDExample.Controllers.HomeController (ContactsManager.UI).
2025-03-12 07:59:53.933 +02:00 [INF] Before logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.934 +02:00 [INF] After logic - ResponseHeaderActionFilter
2025-03-12 07:59:53.934 +02:00 [INF] Executing ViewResult, running view Error.
2025-03-12 07:59:53.936 +02:00 [INF] Executed ViewResult - view Error executed in 2.2832ms.
2025-03-12 07:59:53.936 +02:00 [INF] Executed action CRUDExample.Controllers.HomeController.Error (ContactsManager.UI) in 2.7179ms
2025-03-12 07:59:53.936 +02:00 [INF] Executed endpoint 'CRUDExample.Controllers.HomeController.Error (ContactsManager.UI)'
2025-03-12 07:59:53.936 +02:00 [INF] Response:
StatusCode: 500
my-key-from-global: [Redacted]
Content-Type: text/html; charset=utf-8
Cache-Control: [Redacted]
Pragma: [Redacted]
Expires: -1
2025-03-12 07:59:53.936 +02:00 [ERR] HTTP GET /Error responded 500 in 13.0710 ms
2025-03-12 07:59:53.936 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost/Persons/Index - 500 null text/html; charset=utf-8 49.0064ms
